# 自动补全功能使用说明

## 功能概述

Elasticsearch 客户端现在支持智能自动补全功能，帮助您更快速、准确地编写查询条件。

## 主要特性

### 1. 字段名自动补全
- ✅ 自动从选定索引的映射中提取字段名
- ✅ 支持嵌套字段（如 `user.name`）
- ✅ 支持多字段映射（如 `title.keyword`）
- ✅ 包含常用元字段（`_id`, `_source`, `@timestamp` 等）

### 2. 查询语法关键字补全
- ✅ 查询类型：`match`, `term`, `range`, `bool` 等
- ✅ 聚合函数：`terms`, `avg`, `sum`, `date_histogram` 等
- ✅ 参数名称：`query`, `filter`, `must`, `should` 等
- ✅ 常用值：`asc`, `desc`, `true`, `false` 等

### 3. 智能提示
- ✅ 根据上下文提供相关建议
- ✅ 按相关性排序补全选项
- ✅ 区分字段名和关键字类型

## 使用方法

### 激活自动补全
1. **自动触发**：开始输入时自动显示建议
2. **手动触发**：按 `Ctrl+Space` 强制显示补全菜单
3. **导航选择**：使用 `↑/↓` 箭头键选择选项
4. **确认选择**：按 `Tab` 或 `Enter` 插入选中项

### 示例场景

#### 场景1：基础字段查询
输入：`{"match": {"` 
→ 自动提示所有可用字段名

#### 场景2：聚合查询  
输入：`{"aggs": {"field_agg": {"` 
→ 自动提示聚合类型：`terms`, `avg`, `sum` 等

#### 场景3：布尔查询
输入：`{"bool": {"` 
→ 自动提示：`must`, `should`, `filter`, `must_not`

## 配置选项

### 启用/禁用自动补全
在查询编辑器组件中可以通过 `enableAutocomplete` 属性控制：

```vue
<QueryEditor 
  :enable-autocomplete="true"  <!-- 启用自动补全 -->
/>
```

### 字段名获取
- 自动从当前选择的索引获取字段映射
- 切换索引时会重新加载字段列表
- 网络错误时会优雅降级，仅提供关键字补全

## 提示与技巧

1. **选择索引**：确保先选择索引以获得最佳的字段名提示
2. **网络延迟**：首次加载字段名可能需要几秒钟
3. **大小写敏感**：补全匹配不区分大小写
4. **模糊搜索**：输入部分字符即可匹配相关选项

## 常见查询模式

### 全文搜索
```json
{
  "match": {
    "content": "搜索关键词"
  }
}
```

### 精确匹配
```json
{
  "term": {
    "status.keyword": "published" 
  }
}
```

### 范围查询
```json
{
  "range": {
    "@timestamp": {
      "gte": "2024-01-01",
      "lte": "2024-12-31"
    }
  }
}
```

### 布尔查询
```json
{
  "bool": {
    "must": [
      {"match": {"title": "elasticsearch"}}
    ],
    "filter": [
      {"range": {"date": {"gte": "2024-01-01"}}}
    ]
  }
}
```

### 聚合查询
```json
{
  "match_all": {},
  "aggs": {
    "categories": {
      "terms": {
        "field": "category.keyword"
      }
    }
  }
}
```

---

💡 **提示**：自动补全功能会根据您的使用习惯不断改进，享受更高效的查询编写体验！